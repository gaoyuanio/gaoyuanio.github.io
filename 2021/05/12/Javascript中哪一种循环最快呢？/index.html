<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=2"><meta name="theme-color" content="#FFF"><link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png"><link rel="icon" type="image/ico" sizes="32x32" href="/images/favicon.ico"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><meta name="google-site-verification" content="BmblXLTbEG0oadNT7kCQo-kj5Dt_izzFLYV5KTcssDk"><meta name="msvalidate.01" content="89E58D35F116EFB128D266136B6C2871"><meta name="baidu-site-verification" content="code-do8zfrpF7M"><link rel="alternate" type="application/rss+xml" title="浅岛夏风" href="http://example.com/rss.xml"><link rel="alternate" type="application/atom+xml" title="浅岛夏风" href="http://example.com/atom.xml"><link rel="alternate" type="application/json" title="浅岛夏风" href="http://example.com/feed.json"><link rel="stylesheet" href="//fonts.googleapis.com/css?family=Mulish:300,300italic,400,400italic,700,700italic%7CFredericka%20the%20Great:300,300italic,400,400italic,700,700italic%7CNoto%20Serif%20JP:300,300italic,400,400italic,700,700italic%7CNoto%20Serif%20SC:300,300italic,400,400italic,700,700italic%7CInconsolata:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext"><link rel="stylesheet" href="/css/app.css?v=0.2.5"><meta name="keywords" content="javascript"><link rel="canonical" href="http://example.com/2021/05/12/Javascript%E4%B8%AD%E5%93%AA%E4%B8%80%E7%A7%8D%E5%BE%AA%E7%8E%AF%E6%9C%80%E5%BF%AB%E5%91%A2%EF%BC%9F/"><title>Javascript 中哪一种循环最快呢？ - javascript | GaoYuan's Blog = 浅岛夏风 = 生活就像海洋，只有意志将强的人才能到达彼岸</title><meta name="generator" content="Hexo 5.4.0"></head><body itemscope itemtype="http://schema.org/WebPage"><div id="loading"><div class="cat"><div class="body"></div><div class="head"><div class="face"></div></div><div class="foot"><div class="tummy-end"></div><div class="bottom"></div><div class="legs left"></div><div class="legs right"></div></div><div class="paw"><div class="hands left"></div><div class="hands right"></div></div></div></div><div id="container"><header id="header" itemscope itemtype="http://schema.org/WPHeader"><div class="inner"><div id="brand"><div class="pjax"><h1 itemprop="name headline">Javascript 中哪一种循环最快呢？</h1><div class="meta"><span class="item" title="创建时间：2021-05-12 11:31:26"><span class="icon"><i class="ic i-calendar"></i> </span><span class="text">发表于</span> <time itemprop="dateCreated datePublished" datetime="2021-05-12T11:31:26+08:00">2021-05-12</time> </span><span class="item" title="本文字数"><span class="icon"><i class="ic i-pen"></i> </span><span class="text">本文字数</span> <span>4.7k</span> <span class="text">字</span> </span><span class="item" title="阅读时长"><span class="icon"><i class="ic i-clock"></i> </span><span class="text">阅读时长</span> <span>4 分钟</span></span></div></div></div><nav id="nav"><div class="inner"><div class="toggle"><div class="lines" aria-label="切换导航栏"><span class="line"></span> <span class="line"></span> <span class="line"></span></div></div><ul class="menu"><li class="item title"><a href="/" rel="start">GaoYuan's Blog</a></li></ul><ul class="right"><li class="item theme"><i class="ic i-sun"></i></li><li class="item search"><i class="ic i-search"></i></li></ul></div></nav></div><div id="imgs" class="pjax"><ul><li class="item" data-background-image="https://tva3.sinaimg.cn/large/6833939bly1giclh5u05ej20zk0m87df.jpg"></li><li class="item" data-background-image="https://tva3.sinaimg.cn/large/6833939bly1giph4fomxoj20zk0m8axp.jpg"></li><li class="item" data-background-image="https://tva3.sinaimg.cn/large/6833939bly1gipewkhf1zj20zk0m81kx.jpg"></li><li class="item" data-background-image="https://tva3.sinaimg.cn/large/6833939bly1gipetlbztpj20zk0m84qp.jpg"></li><li class="item" data-background-image="https://tva3.sinaimg.cn/large/6833939bly1gipevo9j1jj20zk0m8e81.jpg"></li><li class="item" data-background-image="https://tva3.sinaimg.cn/large/6833939bly1gipexw3o58j20zk0m8e81.jpg"></li></ul></div></header><div id="waves"><svg class="waves" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto"><defs><path id="gentle-wave" d="M-160 44c30 0 58-18 88-18s 58 18 88 18 58-18 88-18 58 18 88 18 v44h-352z"/></defs><g class="parallax"><use xlink:href="#gentle-wave" x="48" y="0"/><use xlink:href="#gentle-wave" x="48" y="3"/><use xlink:href="#gentle-wave" x="48" y="5"/><use xlink:href="#gentle-wave" x="48" y="7"/></g></svg></div><main><div class="inner"><div id="main" class="pjax"><div class="article wrap"><div class="breadcrumb" itemscope itemtype="https://schema.org/BreadcrumbList"><i class="ic i-home"></i> <span><a href="/">首页</a></span><i class="ic i-angle-right"></i> <span class="current" itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem"><a href="/categories/javascript/" itemprop="item" rel="index" title="分类于 javascript"><span itemprop="name">javascript</span></a><meta itemprop="position" content="1"></span></div><article itemscope itemtype="http://schema.org/Article" class="post block" lang="zh-CN"><link itemprop="mainEntityOfPage" href="http://example.com/2021/05/12/Javascript%E4%B8%AD%E5%93%AA%E4%B8%80%E7%A7%8D%E5%BE%AA%E7%8E%AF%E6%9C%80%E5%BF%AB%E5%91%A2%EF%BC%9F/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/avatar.jpg"><meta itemprop="name" content="浅岛夏风"><meta itemprop="description" content="生活就像海洋，只有意志将强的人才能到达彼岸, 一枚微不足道的前端攻城狮"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="浅岛夏风"></span><div class="body md" itemprop="articleBody"><blockquote><p>了解哪一种 <code>for</code> 循环或迭代器适合我们的需求，防止我们犯下一些影响应用性能的低级错误。</p></blockquote><p>JavaScript 是 Web 开发领域的 “常青树”。无论是 JavaScript 框架（如 Node.js、React、Angular、Vue 等），还是原生 JavaScript，都拥有非常庞大的粉丝基础。我们来谈谈现代 JavaScript 吧。循环一直是大多数编程语言的重要组成部分，而现代 JavaScript 为我们提供了许多迭代或循环值的方法。</p><p>但问题在于，我们是否真的知道哪种循环或迭代最适合我们的需求。 <code>for</code> 循环有很多变形，例如 <code>for</code> 、 <code>for</code> （倒序）、 <code>for…of</code> 、 <code>forEach</code> 、 <code>for…in</code> 、 <code>for…await</code> 。本文将围绕这些展开讨论。</p><span id="more"></span><h2 id="究竟哪一种循环更快"><a class="markdownIt-Anchor" href="#究竟哪一种循环更快">#</a> 究竟哪一种循环更快？</h2><p><strong>答案其实是：</strong> <code>for</code> （倒序）</p><p>最让我感到惊讶的事情是，当我在本地计算机上进行测试之后，我不得不接受 <code>for</code> （倒序）是所有 <code>for</code> 循环中最快的这一事实。下面我会举个对一个包含超过一百万项元素的数组执行一次循环遍历的例子。</p><p><strong>声明</strong>： <code>console.time()</code> 结果的准确度在很大程度上取决于我们运行测试的系统配置。你可以在 https://johnresig.com/blog/accuracy-of-javascript-time/ 对准确度作进一步了解。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">const million = 1000000; </span><br><span class="line">const arr = Array(million);</span><br><span class="line"></span><br><span class="line">// 注：这是稀疏数组，应该为其指定内容，否则不同方式的循环对其的处理方式会不同：</span><br><span class="line">// const arr = [...Array(million)]</span><br><span class="line"></span><br><span class="line">console.time(&#x27;⏳&#x27;);</span><br><span class="line">for (let i = arr.length; i &gt; 0; i--) &#123;&#125; // for(倒序)  :- 1.5ms</span><br><span class="line">for (let i = 0; i &lt; arr.length; i++) &#123;&#125; // for          :- 1.6ms</span><br><span class="line">arr.forEach(v =&gt; v)                     // foreach      :- 2.1ms</span><br><span class="line">for (const v of arr) &#123;&#125;                 // for...of     :- 11.7ms</span><br><span class="line">console.timeEnd(&#x27;⏳&#x27;);</span><br></pre></td></tr></table></figure><p>造成这样结果的原因很简单，在代码中，正序和倒序的 <code>for</code> 循环几乎花费一样的时间，仅仅相差了 0.1 毫秒。原因是， <code>for</code> （倒序）只需要计算一次起始变量 <code>let i = arr.length</code> ，而在正序的 <code>for</code> 循环中，它在每次变量增加后都会检查条件 <code>i&lt;arr.length</code> 。这个细微的差别不是很重要，你可以忽略它。（译者注：在数据量小或对时间不敏感的代码上，我们大可忽略它，但是根据译者的测试，当数据量扩大，例如十亿，千亿等的数量级，差距就显著提升，我们就需要考虑时间对应用程序性能的影响了。）同理，如果知道了差异，正序循环也可以做优化，将 arr.length 存下来， <code>for(let i=0,j=arr.length;i&lt;j;i++)&#123;&#125;</code></p><p>而 <code>forEach</code> 是 <code>Array</code> 原型的一个方法，与普通的 <code>for</code> 循环相比， <code>forEach</code> 和 <code>for…of</code> 需要花费更多的时间进行数组迭代。（译者注：但值得注意的是， <code>for…of</code> 和 <code>forEach</code> 都从对象中获取了数据，而原型并没有，因此没有可比性。）</p><h2 id="循环的类型以及我们应该在何处使用它们"><a class="markdownIt-Anchor" href="#循环的类型以及我们应该在何处使用它们">#</a> 循环的类型，以及我们应该在何处使用它们</h2><h3 id="1-for-循环正序和倒序"><a class="markdownIt-Anchor" href="#1-for-循环正序和倒序">#</a> <strong>1. For 循环（正序和倒序）</strong></h3><p>我想，也许大家都应该对这个基础循环非常熟悉了。我们可以在任何我们需要的地方使用 <code>for</code> 循环，按照核定的次数运行一段代码。最基础的 <code>for</code> 循环运行最迅速的，那我们每一次都应该使用它，对吗？并不然，性能不仅仅只是唯一尺度，代码可读性往往更加重要，就让我们选择适合我们应用程序的变形即可。</p><h3 id="2-foreach"><a class="markdownIt-Anchor" href="#2-foreach">#</a> <strong>2. <code>forEach</code></strong></h3><p>这个方法需要接受一个回调函数作为输入参数，遍历数组的每一个元素，并执行我们的回调函数（以元素本身和它的索引（可选参数）作为参数赋予给回调函数）。 <code>forEach</code> 还允许在回调函数中使用一个可选参数 <code>this</code> 。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">const things = [&#x27;have&#x27;, &#x27;fun&#x27;, &#x27;coding&#x27;];</span><br><span class="line">const callbackFun = (item, idex) =&gt; &#123;</span><br><span class="line">    console.log(`$&#123;item&#125; - $&#123;index&#125;`);</span><br><span class="line">&#125;</span><br><span class="line">things.foreach(callbackFun); </span><br><span class="line">/* 输出   have - 0</span><br><span class="line">        fun - 1</span><br><span class="line">        coding - 2 */</span><br></pre></td></tr></table></figure><p>需要注意的是，如果我们要使用 <code>forEach</code> ，我们不能使用 JavaScript 的短路运算符，即不能在每一次循环中跳过或结束循环。</p><h3 id="3-forof"><a class="markdownIt-Anchor" href="#3-forof">#</a> <strong>3. <code>for…of</code></strong></h3><p><code>for…of</code> 是在 ES6（ECMAScript 6）中实现标准化的。它会对一个可迭代的对象（例如 <code>array</code> 、 <code>map</code> 、 <code>set</code> 、 <code>string</code> 等）创建一个循环，并且有一个突出的优点，即优秀的可读性。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">const arr = [3, 5, 7];</span><br><span class="line">const str = &#x27;hello&#x27;;</span><br><span class="line">for (let i of arr) &#123;</span><br><span class="line">   console.log(i); // 输出 3, 5, 7</span><br><span class="line">&#125;</span><br><span class="line">for (let i of str) &#123;</span><br><span class="line">   console.log(i); // 输出 &#x27;h&#x27;, &#x27;e&#x27;, &#x27;l&#x27;, &#x27;l&#x27;, &#x27;o&#x27;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>需要注意的是，请不要在生成器中使用 <code>for……of</code> ，即便 <code>for……of</code> 循环提前终止。在退出循环后，生成器被关闭，并尝试再次迭代，不会产生任何进一步的结果。</p><h3 id="4-for-in"><a class="markdownIt-Anchor" href="#4-for-in">#</a> <strong>4. <code>for</code> <code>in</code></strong></h3><p><code>for…in</code> 会在对象的所有可枚举属性上迭代指定的变量。对于每个不同的属性， <code>for…in</code> 语句除返回数字索引外，还将返回用户定义的属性的名称。因此，在遍历数组时最好使用带有数字索引的传统 <code>for</code> 循环。因为 <code>for…in</code> 语句还会迭代除数组元素之外的用户定义属性，就算我们修改了数组对象（例如添加自定义属性或方法），依然如此。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">const details = &#123;firstName: &#x27;john&#x27;, lastName: &#x27;Doe&#x27;&#125;;</span><br><span class="line">let fullName = &#x27;&#x27;;</span><br><span class="line">for (let i in details) &#123;</span><br><span class="line">    fullName += details[i] + &#x27; &#x27;; // fullName: john doe</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="forof-和-forin"><a class="markdownIt-Anchor" href="#forof-和-forin">#</a> <code>for…of</code> 和 <code>for…in</code></h2><p><code>for…of</code> 和 <code>for…in</code> 之间的主要区别是它们迭代的内容。 <code>for…in</code> 循环遍历对象的属性，而 <code>for…of</code> 循环遍历可迭代对象的值。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">let arr= [4, 5, 6];</span><br><span class="line">for (let i in arr) &#123;</span><br><span class="line">   console.log(i); // &#x27;0&#x27;, &#x27;1&#x27;, &#x27;2&#x27;</span><br><span class="line">&#125;</span><br><span class="line">for (let i of arr) &#123;</span><br><span class="line">   console.log(i); // &#x27;4&#x27;, &#x27;5&#x27;, &#x27;6&#x27;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="1-遍历数组通常用for循环"><a class="markdownIt-Anchor" href="#1-遍历数组通常用for循环">#</a> 1. 遍历数组通常用 for 循环</h3><p>ES5 的话也可以使用 forEach，ES5 具有遍历数组功能的还有 map、filter、some、every、reduce、reduceRight 等，只不过他们的返回结果不一样。但是使用 foreach 遍历数组的话，使用 break 不能中断循环，使用 return 也不能返回到外层函数。</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Array</span>.prototype.method=<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">　　<span class="built_in">console</span>.log(<span class="built_in">this</span>.length);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> myArray=[<span class="number">1</span>,<span class="number">2</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>]</span><br><span class="line">myArray.name=<span class="string">&quot;数组&quot;</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> index <span class="keyword">in</span> myArray) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(myArray[index]);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="2-for-in遍历数组的毛病"><a class="markdownIt-Anchor" href="#2-for-in遍历数组的毛病">#</a> 2. for in 遍历数组的毛病</h3><p>1.index 索引为字符串型数字，不能直接进行几何运算<br>2. 遍历顺序有可能不是按照实际数组的内部顺序<br>3. 使用 for in 会遍历数组所有的可枚举属性，包括原型。例如上栗的原型方法 method 和 name 属性<br>所以 for in 更适合遍历对象，不要使用 for in 遍历数组。</p><p>那么除了使用 for 循环，如何更简单的正确的遍历数组达到我们的期望呢（即不遍历 method 和 name），ES6 中的 for of 更胜一筹.</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Array</span>.prototype.method=<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">　　<span class="built_in">console</span>.log(<span class="built_in">this</span>.length);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> myArray=[<span class="number">1</span>,<span class="number">2</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>]</span><br><span class="line">myArray.name=<span class="string">&quot;数组&quot;</span>;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> value <span class="keyword">of</span> myArray) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(value);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><em>记住，for in 遍历的是数组的索引（即键名），而 for of 遍历的是数组元素值。</em></p><p>for of 遍历的只是数组内的元素，而不包括数组的原型属性 method 和索引 name</p><h3 id="3-遍历对象"><a class="markdownIt-Anchor" href="#3-遍历对象">#</a> 3. 遍历对象</h3><p>遍历对象 通常用 for in 来遍历对象的键名</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Object</span>.prototype.method=<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">　　<span class="built_in">console</span>.log(<span class="built_in">this</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> myObject=&#123;</span><br><span class="line">　　<span class="attr">a</span>:<span class="number">1</span>,</span><br><span class="line">　　<span class="attr">b</span>:<span class="number">2</span>,</span><br><span class="line">　　<span class="attr">c</span>:<span class="number">3</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> key <span class="keyword">in</span> myObject) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(key);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>for in 可以遍历到 myObject 的原型方法 method, 如果不想遍历原型方法和属性的话，可以在循环内部判断一下，hasOwnPropery 方法可以判断某属性是否是该对象的实例属性</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> key <span class="keyword">in</span> myObject) &#123;</span><br><span class="line">　　<span class="keyword">if</span>（myObject.hasOwnProperty(key))&#123;</span><br><span class="line">　　　　<span class="built_in">console</span>.log(key);</span><br><span class="line">　　&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>同样可以通过 ES5 的 Object.keys (myObject) 获取对象的实例属性组成的数组，不包括原型方法和属性</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Object</span>.prototype.method=<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">　　<span class="built_in">console</span>.log(<span class="built_in">this</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> myObject=&#123;</span><br><span class="line">　　<span class="attr">a</span>:<span class="number">1</span>,</span><br><span class="line">　　<span class="attr">b</span>:<span class="number">2</span>,</span><br><span class="line">　　<span class="attr">c</span>:<span class="number">3</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="总结"><a class="markdownIt-Anchor" href="#总结">#</a> 总结</h3><ul><li>for…of 适用遍历数 / 数组对象 / 字符串 /map/set 等拥有迭代器对象的集合。但是不能遍历对象，因为没有迭代器对象。与 forEach () 不同的是，它可以正确响应 break、continue 和 return 语句</li><li>for-of 循环不支持普通对象，但如果你想迭代一个对象的属性，你可以用 for-in 循环（这也是它的本职工作）或内建的 Object.keys () 方法：</li></ul><h2 id="结论"><a class="markdownIt-Anchor" href="#结论">#</a> 结论</h2><ul><li><code>for</code> 最快，但可读性比较差</li><li><code>foreach</code> 比较快，能够控制内容</li><li><code>for...of</code> 比较慢，但香</li><li><code>for...in</code> 比较慢，没那么方便</li></ul><p>最后，给你一条明智的建议 —— 优先考虑可读性。尤其是当我们开发复杂的结构程序时，更需要这样做。当然，我们也应该专注于性能。尽量避免增添不必要的、多余的花哨代码，因为这有时可能对你的程序性能造成严重影响。祝你编码愉快。</p><div class="tags"><a href="/tags/javascript/" rel="tag"><i class="ic i-tag"></i> javascript</a></div></div><footer><div class="meta"><span class="item"><span class="icon"><i class="ic i-calendar-check"></i> </span><span class="text">更新于</span> <time title="修改时间：2021-05-13 16:39:28" itemprop="dateModified" datetime="2021-05-13T16:39:28+08:00">2021-05-13</time> </span><span id="2021/05/12/Javascript中哪一种循环最快呢？/" class="item leancloud_visitors" data-flag-title="Javascript 中哪一种循环最快呢？" title="阅读次数"><span class="icon"><i class="ic i-eye"></i> </span><span class="text">阅读次数</span> <span class="leancloud-visitors-count"></span> <span class="text">次</span></span></div><div id="copyright"><ul><li class="author"><strong>本文作者： </strong>浅岛夏风 <i class="ic i-at"><em>@</em></i>浅岛夏风</li><li class="link"><strong>本文链接：</strong> <a href="http://example.com/2021/05/12/Javascript%E4%B8%AD%E5%93%AA%E4%B8%80%E7%A7%8D%E5%BE%AA%E7%8E%AF%E6%9C%80%E5%BF%AB%E5%91%A2%EF%BC%9F/" title="Javascript 中哪一种循环最快呢？">http://example.com/2021/05/12/Javascript中哪一种循环最快呢？/</a></li><li class="license"><strong>版权声明： </strong>本站所有文章除特别声明外，均采用 <span class="exturl" data-url="aHR0cHM6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL2xpY2Vuc2VzL2J5LW5jLXNhLzQuMC9kZWVkLnpo"><i class="ic i-creative-commons"><em>(CC)</em></i>BY-NC-SA</span> 许可协议。转载请注明出处！</li></ul></div></footer></article></div><div class="post-nav"><div class="item left"><a href="/2021/04/25/%E7%A7%BB%E5%8A%A8%E7%AB%AF%E8%87%AA%E9%80%82%E5%BA%94%E2%80%94%E2%80%94%E6%89%8B%E6%B7%98flexible/" itemprop="url" rel="prev" data-background-image="https:&#x2F;&#x2F;tva3.sinaimg.cn&#x2F;mw690&#x2F;6833939bly1gipexe4oykj20zk0m87ji.jpg" title="移动端自适应——手淘flexible"><span class="type">上一篇</span> <span class="category"><i class="ic i-flag"></i> 移动端</span><h3>移动端自适应——手淘flexible</h3></a></div><div class="item right"></div></div><div class="wrap" id="comments"></div></div><div id="sidebar"><div class="inner"><div class="panels"><div class="inner"><div class="contents panel pjax" data-title="文章目录"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%A9%B6%E7%AB%9F%E5%93%AA%E4%B8%80%E7%A7%8D%E5%BE%AA%E7%8E%AF%E6%9B%B4%E5%BF%AB"><span class="toc-number">1.</span> <span class="toc-text">究竟哪一种循环更快？</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%BE%AA%E7%8E%AF%E7%9A%84%E7%B1%BB%E5%9E%8B%E4%BB%A5%E5%8F%8A%E6%88%91%E4%BB%AC%E5%BA%94%E8%AF%A5%E5%9C%A8%E4%BD%95%E5%A4%84%E4%BD%BF%E7%94%A8%E5%AE%83%E4%BB%AC"><span class="toc-number">2.</span> <span class="toc-text">循环的类型，以及我们应该在何处使用它们</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-for-%E5%BE%AA%E7%8E%AF%E6%AD%A3%E5%BA%8F%E5%92%8C%E5%80%92%E5%BA%8F"><span class="toc-number">2.1.</span> <span class="toc-text">1. For 循环（正序和倒序）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-foreach"><span class="toc-number">2.2.</span> <span class="toc-text">2. forEach</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-forof"><span class="toc-number">2.3.</span> <span class="toc-text">3. for…of</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-for-in"><span class="toc-number">2.4.</span> <span class="toc-text">4. for in</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#forof-%E5%92%8C-forin"><span class="toc-number">3.</span> <span class="toc-text">for…of 和 for…in</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E9%81%8D%E5%8E%86%E6%95%B0%E7%BB%84%E9%80%9A%E5%B8%B8%E7%94%A8for%E5%BE%AA%E7%8E%AF"><span class="toc-number">3.1.</span> <span class="toc-text">1. 遍历数组通常用 for 循环</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-for-in%E9%81%8D%E5%8E%86%E6%95%B0%E7%BB%84%E7%9A%84%E6%AF%9B%E7%97%85"><span class="toc-number">3.2.</span> <span class="toc-text">2. for in 遍历数组的毛病</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E9%81%8D%E5%8E%86%E5%AF%B9%E8%B1%A1"><span class="toc-number">3.3.</span> <span class="toc-text">3. 遍历对象</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%80%BB%E7%BB%93"><span class="toc-number">3.4.</span> <span class="toc-text">总结</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BB%93%E8%AE%BA"><span class="toc-number">4.</span> <span class="toc-text">结论</span></a></li></ol></div><div class="related panel pjax" data-title="系列文章"><ul><li><a href="/2021/02/11/JS%E5%AE%9E%E7%8E%B0%E5%9B%BE%E7%89%87%E5%8E%8B%E7%BC%A9/" rel="bookmark" title="JS实现图片压缩">JS实现图片压缩</a></li><li><a href="/2021/03/19/%E5%87%BD%E6%95%B0%E9%98%B2%E6%8A%96%E4%B8%8E%E8%8A%82%E6%B5%81/" rel="bookmark" title="函数防抖与节流">函数防抖与节流</a></li><li class="active"><a href="/2021/05/12/Javascript%E4%B8%AD%E5%93%AA%E4%B8%80%E7%A7%8D%E5%BE%AA%E7%8E%AF%E6%9C%80%E5%BF%AB%E5%91%A2%EF%BC%9F/" rel="bookmark" title="Javascript中哪一种循环最快呢？">Javascript中哪一种循环最快呢？</a></li></ul></div><div class="overview panel" data-title="站点概览"><div class="author" itemprop="author" itemscope itemtype="http://schema.org/Person"><img class="image" itemprop="image" alt="浅岛夏风" data-src="/images/avatar.jpg"><p class="name" itemprop="name">浅岛夏风</p><div class="description" itemprop="description">一枚微不足道的前端攻城狮</div></div><nav class="state"><div class="item posts"><a href="/archives/"><span class="count">24</span> <span class="name">文章</span></a></div><div class="item categories"><a href="/categories/"><span class="count">11</span> <span class="name">分类</span></a></div><div class="item tags"><a href="/tags/"><span class="count">13</span> <span class="name">标签</span></a></div></nav><div class="social"><span class="exturl item github" data-url="aHR0cHM6Ly9naXRodWIuY29tL2dhb3l1YW5pbw==" title="https:&#x2F;&#x2F;github.com&#x2F;gaoyuanio"><i class="ic i-github"></i></span> <span class="exturl item wechat" data-url="aHR0cHM6Ly9jZG4uanNkZWxpdnIubmV0L2doL2dhb3l1YW5pby9pbWdzL2ltZy8yMzE2MTU4OTgwMjVfLnBpYy5qcGc=" title="https:&#x2F;&#x2F;cdn.jsdelivr.net&#x2F;gh&#x2F;gaoyuanio&#x2F;imgs&#x2F;img&#x2F;231615898025_.pic.jpg"><i class="ic i-weixin"></i></span> <span class="exturl item QQ" data-url="aHR0cHM6Ly9xbS5xcS5jb20vY2dpLWJpbi9xbS9xcj9rPVFXMmRpV2lYYWtlcVlOanVnaEtZS3ZvOUxWWFdkMHJZJm5vdmVyaWZ5PTA=" title="https:&#x2F;&#x2F;qm.qq.com&#x2F;cgi-bin&#x2F;qm&#x2F;qr?k&#x3D;QW2diWiXakeqYNjughKYKvo9LVXWd0rY&amp;noverify&#x3D;0"><i class="ic i-qq"></i></span> <span class="exturl item email" data-url="bWFpbHRvOmdhb3l1YW45ODQxQDE2My5jb20=" title="mailto:gaoyuan9841@163.com"><i class="ic i-envelope"></i></span></div><ul class="menu"><li class="item"><a href="/" rel="section"><i class="ic i-home"></i>首页</a></li><li class="item"><a href="/about/" rel="section"><i class="ic i-user"></i>关于</a></li><li class="item dropdown"><a href="javascript:void(0);"><i class="ic i-feather"></i>文章</a><ul class="submenu"><li class="item"><a href="/archives/" rel="section"><i class="ic i-list-alt"></i>归档</a></li><li class="item"><a href="/categories/" rel="section"><i class="ic i-th"></i>分类</a></li><li class="item"><a href="/tags/" rel="section"><i class="ic i-tags"></i>标签</a></li></ul></li><li class="item dropdown"><a href="/friends/" rel="section"><i class="ic i-magic"></i>links</a><ul class="submenu"><li class="item"><a href="/friends/" rel="section"><i class="ic i-heart"></i>friends</a></li></ul></li></ul></div></div></div><ul id="quick"><li class="prev pjax"></li><li class="up"><i class="ic i-arrow-up"></i></li><li class="down"><i class="ic i-arrow-down"></i></li><li class="next pjax"></li><li class="percent"></li></ul></div></div><div class="dimmer"></div></div></main><footer id="footer"><div class="inner"><div class="widgets"><div class="rpost pjax"><h2>随机文章</h2><ul><li class="item"><div class="breadcrumb"><a href="/categories/MySQL/" title="分类于 MySQL">MySQL</a></div><span><a href="/2017/08/06/MySQL%E5%88%97%E7%B1%BB%E5%9E%8B%E5%92%8C%E5%88%97%E4%B8%8A%E7%BA%A6%E6%9D%9F/" title="MySQL列类型和列上约束">MySQL列类型和列上约束</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/note/" title="分类于 个人笔记">个人笔记</a></div><span><a href="/2020/05/01/%E5%BC%80%E5%8F%91%E5%B0%8F%E6%8A%80%E5%B7%A7/" title="开发小技巧">开发小技巧</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/vue/" title="分类于 Vue 专题">Vue 专题</a></div><span><a href="/2021/02/20/VUE%E7%BB%84%E4%BB%B6%E4%B9%8B%E9%97%B4%E9%80%9A%E4%BF%A1%E7%9A%846%E7%A7%8D%E6%96%B9%E5%BC%8F/" title="VUE组件之间通信的6种方式">VUE组件之间通信的6种方式</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/%E7%A7%BB%E5%8A%A8%E7%AB%AF/" title="分类于 移动端">移动端</a></div><span><a href="/2021/04/25/%E7%A7%BB%E5%8A%A8%E7%AB%AF%E8%87%AA%E9%80%82%E5%BA%94%E2%80%94%E2%80%94%E6%89%8B%E6%B7%98flexible/" title="移动端自适应——手淘flexible">移动端自适应——手淘flexible</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/script-topic/" title="分类于 JavaScript 专题">JavaScript 专题</a></div><span><a href="/2021/03/24/JavaScript%E5%9F%BA%E7%A1%80%EF%BC%88%E5%9B%9B%EF%BC%89%E7%AB%8B%E5%8D%B3%E8%B0%83%E7%94%A8%E5%87%BD%E6%95%B0/" title="JavaScript基础（四）立即调用函数">JavaScript基础（四）立即调用函数</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/vue/" title="分类于 Vue 专题">Vue 专题</a></div><span><a href="/2020/11/18/vue%E9%A1%B9%E7%9B%AE%E6%89%93%E5%8C%85%E4%BC%98%E5%8C%96%E7%AD%96%E7%95%A5/" title="vue项目打包优化策略">vue项目打包优化策略</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/react/" title="分类于 react">react</a></div><span><a href="/2021/04/13/%E5%AE%9E%E7%8E%B0%E6%BB%9A%E5%8A%A8%E5%8A%A8%E7%94%BB%E2%80%94%E6%B8%90%E5%85%A5%E5%8A%A8%E7%94%BB/" title="实现滚动动画—渐入动画">实现滚动动画—渐入动画</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/script-topic/" title="分类于 JavaScript 专题">JavaScript 专题</a></div><span><a href="/2021/03/20/JavaScript%E5%9F%BA%E7%A1%80%EF%BC%88%E4%B8%80%EF%BC%89this/" title="JavaScript基础（一）this">JavaScript基础（一）this</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/Hbuilder/" title="分类于 Hbuilder">Hbuilder</a></div><span><a href="/2018/07/12/%E4%BD%BF%E7%94%A8Hbuilder%E5%BF%AB%E9%80%9F%E6%89%93%E5%8C%85%E4%B8%80%E4%B8%AAapp/" title="使用Hbuilder快速打包一个app">使用Hbuilder快速打包一个app</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/javascript/" title="分类于 javascript">javascript</a></div><span><a href="/2021/05/12/Javascript%E4%B8%AD%E5%93%AA%E4%B8%80%E7%A7%8D%E5%BE%AA%E7%8E%AF%E6%9C%80%E5%BF%AB%E5%91%A2%EF%BC%9F/" title="Javascript中哪一种循环最快呢？">Javascript中哪一种循环最快呢？</a></span></li></ul></div><div><h2>最新评论</h2><ul class="leancloud-recent-comment"></ul></div></div><div class="status"><div class="copyright">&copy; 2010 – <span itemprop="copyrightYear">2021</span> <span class="with-love"><i class="ic i-sakura rotate"></i> </span><span class="author" itemprop="copyrightHolder">浅岛夏风 @ GaoYuan's Blog</span></div><div class="count"><span class="post-meta-item-icon"><i class="ic i-chart-area"></i> </span><span title="站点总字数">93k 字</span> <span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="ic i-coffee"></i> </span><span title="站点阅读时长">1:24</span></div><div class="powered-by">基于 <span class="exturl" data-url="aHR0cHM6Ly9oZXhvLmlv">Hexo</span> & Theme.<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2FtZWhpbWUvaGV4by10aGVtZS1zaG9rYQ==">Shoka</span></div></div></div></footer></div><script data-config type="text/javascript">var LOCAL={path:"2021/05/12/Javascript中哪一种循环最快呢？/",favicon:{show:"(●´3｀●）",hide:"(´Д｀)"},search:{placeholder:"文章搜索",empty:"关于 「 ${query} 」，什么也没搜到",stats:"${time} ms 内找到 ${hits} 条结果"},valine:!0,fancybox:!0,copyright:'复制成功，转载请遵守 <i class="ic i-creative-commons"></i>BY-NC-SA 协议。',ignores:[function(e){return e.includes("#")},function(e){return new RegExp(LOCAL.path+"$").test(e)}]}</script><script src="https://cdn.polyfill.io/v2/polyfill.js"></script><script src="//cdn.jsdelivr.net/combine/npm/pace-js@1.0.2/pace.min.js,npm/pjax@0.2.8/pjax.min.js,npm/whatwg-fetch@3.4.0/dist/fetch.umd.min.js,npm/animejs@3.2.0/lib/anime.min.js,npm/algoliasearch@4/dist/algoliasearch-lite.umd.js,npm/instantsearch.js@4/dist/instantsearch.production.min.js,npm/lozad@1/dist/lozad.min.js,npm/quicklink@2/dist/quicklink.umd.js"></script><script src="/js/app.js?v=0.2.5"></script><script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({pluginRootPath:"live2dw/",pluginJsPath:"lib/",pluginModelPath:"assets/",tagMode:!1,debug:!0,model:{jsonPath:"/live2dw/assets/wanko.model.json"},display:{position:"right",width:150,height:300},mobile:{show:!0},react:{opacity:.7},log:!1})</script></body></html>